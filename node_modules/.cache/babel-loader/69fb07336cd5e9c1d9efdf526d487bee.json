{"ast":null,"code":"import _classCallCheck from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import CKEditor from'ckeditor4-react';import{Link}from'react-router-dom';import{connect}from'react-redux';import*as tarjetasActions from'../../../../actions/tarjetasActions';var EditarTarjeta=/*#__PURE__*/function(_Component){_inherits(EditarTarjeta,_Component);function EditarTarjeta(props){var _this;_classCallCheck(this,EditarTarjeta);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditarTarjeta).call(this,props));_this.editar=function(){var data={\"id\":_this.props.location.id,\"texto\":_this.props.location.texto,\"titulo\":_this.props.location.titulo,\"file\":_this.props.file,\"type\":_this.props.type,\"subtema_id\":document.getElementById('subtemas').value,\"prioridad\":document.getElementById('show_prioridades').value};_this.props.editarTarjeta(data);};_this.showPrioridades=function(){var items=[];for(var i=0;i<_this.props.location.nroTarjetas;i++){items.push(React.createElement(\"option\",{value:i+1,key:i},\" \",i+1,\" \"));}return items;};_this.showSubtemas=function(){return _this.props.subtemas.map(function(p,index){return React.createElement(\"option\",{key:index,value:p.id},p.texto);});};_this.handleChange=function(e){var file=e.target.files[0];var output=document.getElementById('output');output.src=URL.createObjectURL(e.target.files[0]);window.localStorage.setItem('imgData',output.src);window.localStorage.setItem('size',file.size);_this.props.setFile(file);_this.props.setType(file.type);};_this.state={texto:_this.props.location.texto,titulo:_this.props.location.titulo};_this.onEditorTextoChange=_this.onEditorTextoChange.bind(_assertThisInitialized(_this));return _this;}_createClass(EditarTarjeta,[{key:\"delete\",value:function _delete(){this.props.eliminarTarjeta(this.props.location.id);}},{key:\"onEditorTextoChange\",value:function onEditorTextoChange(evt){this.setState({texto:evt.editor.getData()});}},{key:\"onEditorTituloChange\",value:function onEditorTituloChange(evt){this.setState({titulo:evt.editor.getData()});}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col l12\"},React.createElement(\"div\",{className:\"card-panel\"},React.createElement(\"div\",{className:\"card-title\"},React.createElement(\"h5\",null,\"Editar tarjeta de conocimiento\")),React.createElement(\"div\",{className:\"card-content\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"form\",{className:\"col s12\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"input-field col s6\"},React.createElement(\"p\",null,\"Prioridad\"),React.createElement(\"select\",{id:\"show_prioridades\",className:\"browser-default\",defaultValue:this.props.location.prioridad},this.showPrioridades())),React.createElement(\"div\",{className:\"row\"},React.createElement(\"p\",null,\"Texto de la tarjeta\"),React.createElement(CKEditor,{data:this.state.texto,onChange:this.onEditorTextoChange})),React.createElement(\"div\",{className:\"row\"},React.createElement(\"p\",null,\"T\\xEDtulo de la tarjeta\"),React.createElement(CKEditor,{data:this.state.titulo,onChange:this.onEditorTituloChange})),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"input-field col s6\"},React.createElement(\"p\",null,\"Imagen\"),React.createElement(\"input\",{id:\"url_recurso\",onChange:function onChange(e){return _this2.handleChange(e);},type:\"file\",className:\"validate\"})),React.createElement(\"div\",{className:\"card\"},React.createElement(\"div\",{className:\"card-image\"},React.createElement(\"img\",{id:\"output\",className:\"col l6\",alt:\"imagen\",src:this.props.location.path_imagen})))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"input-field col s6\"},React.createElement(\"p\",null,\"\\xBFA qu\\xE9 subtema pertenece?\"),React.createElement(\"select\",{id:\"subtemas\",className:\"browser-default\"},this.showSubtemas()))))))),React.createElement(\"div\",{className:\"card-action\"},React.createElement(Link,{className:\"btn btn-small btn_opts\",onClick:this.editar,to:\"/tarjetas\"},\"Guardar\"),React.createElement(Link,{className:\"btn btn-small btn_opts\",to:\"/tarjetas\"},\"Cancelar\"),React.createElement(Link,{className:\"btn btn-small btn_opts\",to:\"/tarjetas\",onClick:function onClick(){_this2.delete();}},\"Eliminar\")))));}}]);return EditarTarjeta;}(Component);var mapToStateProps=function mapToStateProps(reducers){return reducers.tarjetasReducers;};export default connect(mapToStateProps,tarjetasActions)(EditarTarjeta);","map":{"version":3,"sources":["C:/wamp64/www/whitelabel_fe/src/components/dashboard/tarjetas/editar/EditarTarjeta.js"],"names":["React","Component","CKEditor","Link","connect","tarjetasActions","EditarTarjeta","props","editar","data","location","id","texto","titulo","file","type","document","getElementById","value","editarTarjeta","showPrioridades","items","i","nroTarjetas","push","showSubtemas","subtemas","map","p","index","handleChange","e","target","files","output","src","URL","createObjectURL","window","localStorage","setItem","size","setFile","setType","state","onEditorTextoChange","bind","eliminarTarjeta","evt","setState","editor","getData","prioridad","onEditorTituloChange","path_imagen","delete","mapToStateProps","reducers","tarjetasReducers"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport CKEditor from 'ckeditor4-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport * as tarjetasActions from '../../../../actions/tarjetasActions';\r\n\r\nclass EditarTarjeta extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            texto: this.props.location.texto,\r\n            titulo: this.props.location.titulo\r\n        };\r\n\r\n        this.onEditorTextoChange = this.onEditorTextoChange.bind(this);\r\n\r\n    }\r\n\r\n    editar = () => {\r\n\r\n        let data = {\r\n            \"id\": this.props.location.id,\r\n            \"texto\": this.props.location.texto,\r\n            \"titulo\": this.props.location.titulo,\r\n            \"file\": this.props.file,\r\n            \"type\": this.props.type,\r\n            \"subtema_id\": document.getElementById('subtemas').value,\r\n            \"prioridad\": document.getElementById('show_prioridades').value\r\n        }\r\n\r\n        this.props.editarTarjeta(data);\r\n    }\r\n    delete() {\r\n\r\n        this.props.eliminarTarjeta(this.props.location.id);\r\n    }\r\n\r\n    onEditorTextoChange(evt) {\r\n        this.setState({\r\n            texto: evt.editor.getData()\r\n        });\r\n    }\r\n\r\n    onEditorTituloChange(evt) {\r\n        this.setState({\r\n            titulo: evt.editor.getData()\r\n        });\r\n    }\r\n\r\n    showPrioridades = () => {\r\n        let items = []\r\n        for (let i = 0; i < this.props.location.nroTarjetas; i++) {\r\n            items.push(<option value={i + 1} key={i}> {i + 1} </option>)\r\n        }\r\n        return items;\r\n    }\r\n    showSubtemas = () => this.props.subtemas.map((p, index) => (\r\n        <option key={index} value={p.id}>{p.texto}</option>\r\n    ))\r\n\r\n    handleChange = (e) => {\r\n        var file = e.target.files[0];\r\n        var output = document.getElementById('output');\r\n        output.src = URL.createObjectURL(e.target.files[0]);\r\n        window.localStorage.setItem('imgData', output.src);\r\n        window.localStorage.setItem('size', file.size);\r\n        this.props.setFile(file);\r\n        this.props.setType(file.type);\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col l12\">\r\n                    <div className=\"card-panel\">\r\n                        <div className=\"card-title\"><h5>Editar tarjeta de conocimiento</h5></div>\r\n                        <div className=\"card-content\">\r\n                            <div className=\"row\">\r\n                                <form className=\"col s12\">\r\n                                    <div className=\"row\">\r\n                                        <div className=\"input-field col s6\">\r\n                                            <p>Prioridad</p>\r\n                                            <select id=\"show_prioridades\" className=\"browser-default\" defaultValue={this.props.location.prioridad}>\r\n                                                {this.showPrioridades()}\r\n                                            </select>\r\n                                        </div>\r\n                                        <div className=\"row\">\r\n                                            <p>Texto de la tarjeta</p>\r\n                                            <CKEditor\r\n                                                data={this.state.texto}\r\n                                                onChange={this.onEditorTextoChange} />\r\n                                        </div>\r\n                                        <div className=\"row\">\r\n                                            <p>Título de la tarjeta</p>\r\n                                            <CKEditor\r\n                                                data={this.state.titulo}\r\n                                                onChange={this.onEditorTituloChange} />\r\n                                        </div>\r\n                                        <div className=\"row\">\r\n                                            <div className=\"input-field col s6\">\r\n                                                <p>Imagen</p>\r\n                                                <input id=\"url_recurso\" onChange={e => this.handleChange(e)} type=\"file\" className=\"validate\" />\r\n                                            </div>\r\n                                            <div className=\"card\">\r\n                                                <div className=\"card-image\">\r\n                                                    <img id=\"output\" className=\"col l6\" alt=\"imagen\" src={this.props.location.path_imagen} />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"row\">\r\n                                            <div className=\"input-field col s6\">\r\n                                                <p>¿A qué subtema pertenece?</p>\r\n                                                <select id=\"subtemas\" className=\"browser-default\">\r\n                                                    {this.showSubtemas()}\r\n                                                </select>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"card-action\">\r\n                            <Link className=\"btn btn-small btn_opts\" onClick={this.editar} to='/tarjetas'>Guardar</Link>\r\n                            <Link className=\"btn btn-small btn_opts\" to='/tarjetas'>Cancelar</Link>\r\n                            <Link className=\"btn btn-small btn_opts\" to='/tarjetas' onClick={() => { this.delete() }}>Eliminar</Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst mapToStateProps = (reducers) => {\r\n    return reducers.tarjetasReducers;\r\n}\r\nexport default connect(mapToStateProps, tarjetasActions)(EditarTarjeta);"]},"metadata":{},"sourceType":"module"}