{"ast":null,"code":"import _classCallCheck from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\wamp64\\\\www\\\\whitelabel_fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import CKEditor from'ckeditor4-react';import'./Crear.css';import{Link}from'react-router-dom';import{connect}from'react-redux';import*as preguntasActions from'../../../../actions/preguntasActions';var CrearPregunta=/*#__PURE__*/function(_Component){_inherits(CrearPregunta,_Component);function CrearPregunta(props){var _this;_classCallCheck(this,CrearPregunta);_this=_possibleConstructorReturn(this,_getPrototypeOf(CrearPregunta).call(this,props));_this.crear=function(){//let idPregunta = this.props.preguntas; \nvar data={\"texto\":_this.state.data,\"modulo_id\":document.getElementById('modulos').value,\"respuestas\":[{'texto':document.getElementById('texto_respuesta_1').value,\"posicion\":document.getElementById('pos_resp_1').value,\"puntaje\":document.getElementById('score_resp_1').value},{'texto':document.getElementById('texto_respuesta_2').value,\"posicion\":document.getElementById('pos_resp_2').value,\"puntaje\":document.getElementById('score_resp_2').value},{'texto':document.getElementById('texto_respuesta_3').value,\"posicion\":document.getElementById('pos_resp_3').value,\"puntaje\":document.getElementById('score_resp_3').value}]};console.log(data);_this.props.crearPregunta(data,_this.props.preguntas);};_this.positionChange=function(e,positions){var postionsEnables=positions;var pos=postionsEnables.indexOf(e.target.value);postionsEnables.splice(pos,1);if(e.target.id=='pos_resp_1'){_this.setState({positions:postionsEnables});}else{_this.setState({positionsLastSelect:postionsEnables});}};_this.scoreChange=function(e,scores){var scoresEnables=scores;console.log(e.target.value);var pos=scoresEnables.indexOf(e.target.value);scoresEnables.splice(pos,1);if(e.target.id=='score_resp_1'){_this.setState({scores:scoresEnables});}else{_this.setState({scoresLastSelect:scoresEnables});}};_this.showOptions=function(options){return options.map(function(op,index){return React.createElement(\"option\",{key:index,value:op},op);});};_this.showModulos=function(){return _this.props.modulos.map(function(p,index){return React.createElement(\"option\",{key:index,value:p.id},p.texto);});};_this.showScores=function(e,item){console.log(e.target.value);};_this.state={data:'<p>Escriba el <em>texto</em> de la <strong>pregunta</strong></p>',positions:[],positionsLastSelect:[],scores:[],scoresLastSelect:[]};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onEditorChange=_this.onEditorChange.bind(_assertThisInitialized(_this));return _this;}_createClass(CrearPregunta,[{key:\"onEditorChange\",value:function onEditorChange(evt){this.setState({data:evt.editor.getData()});}},{key:\"handleChange\",value:function handleChange(changeEvent){this.setState({data:changeEvent.target.value});}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col l12\"},React.createElement(\"div\",{className:\"card-panel\"},React.createElement(\"div\",{className:\"card-content\"},React.createElement(\"span\",{className:\"card-title\"},React.createElement(\"h4\",null,\"Pregunta\")),React.createElement(\"div\",{className:\"row\"},React.createElement(\"form\",{className:\"col s12\"},React.createElement(CKEditor,{data:this.state.data,onChange:this.onEditorChange}))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"input-field col s6\"},React.createElement(\"p\",null,\"M\\xF3dulo :\"),React.createElement(\"select\",{id:\"modulos\",className:\"browser-default\"},this.showModulos()))))),React.createElement(\"div\",{className:\"card-panel\"},React.createElement(\"div\",{className:\"card-content\"},React.createElement(\"span\",{className:\"card-title\"},React.createElement(\"h4\",null,\"Respuestas\")),React.createElement(\"div\",{className:\"row\"},React.createElement(\"form\",{className:\"col s12\"},React.createElement(\"div\",{className:\"input-field col s1\"},React.createElement(\"select\",{id:\"pos_resp_1\",className:\"browser-default\",onChange:function onChange(e){_this2.positionChange(e,['a','b','c']);}},React.createElement(\"option\",{value:\"\"},\"Posici\\xF3n\"),React.createElement(\"option\",{value:\"a\"},\"a\"),React.createElement(\"option\",{value:\"b\"},\"b\"),React.createElement(\"option\",{value:\"c\"},\"c\"))),React.createElement(\"div\",{className:\"input-field col s10\"},React.createElement(\"input\",{id:\"texto_respuesta_1\",type:\"text\",className:\"validate\"}),React.createElement(\"label\",{htmlFor:\"texto_respuesta\"},\"Texto de la respuesta\")),React.createElement(\"div\",{className:\"input-field col s1\"},React.createElement(\"select\",{id:\"score_resp_1\",className:\"browser-default\",onChange:function onChange(e){_this2.scoreChange(e,['0','1','2']);}},React.createElement(\"option\",{value:\"\"},\"Puntaje\"),React.createElement(\"option\",{value:\"0\"},\"0\"),React.createElement(\"option\",{value:\"1\"},\"1\"),React.createElement(\"option\",{value:\"2\"},\"2\")))))),React.createElement(\"div\",{className:\"card-content\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"form\",{className:\"col s12\"},React.createElement(\"div\",{className:\"input-field col s1\"},React.createElement(\"select\",{id:\"pos_resp_2\",className:\"browser-default\",onChange:function onChange(e){_this2.positionChange(e,_this2.state.positions.slice());}},React.createElement(\"option\",{value:\"default\"},\"Posici\\xF3n\"),this.showOptions(this.state.positions))),React.createElement(\"div\",{className:\"input-field col s10\"},React.createElement(\"input\",{id:\"texto_respuesta_2\",type:\"text\",className:\"validate\"}),React.createElement(\"label\",{htmlFor:\"texto_respuesta\"},\"Texto de la respuesta\")),React.createElement(\"div\",{className:\"input-field col s1\"},React.createElement(\"select\",{id:\"score_resp_2\",className:\"browser-default\",onChange:function onChange(e){_this2.scoreChange(e,_this2.state.scores.slice());}},React.createElement(\"option\",{value:\"\"},\"Puntaje\"),this.showOptions(this.state.scores)))))),React.createElement(\"div\",{className:\"card-content\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"form\",{className:\"col s12\"},React.createElement(\"div\",{className:\"input-field col s1\"},React.createElement(\"select\",{id:\"pos_resp_3\",className:\"browser-default\"},React.createElement(\"option\",{value:\"\"},\"Posici\\xF3n\"),this.showOptions(this.state.positionsLastSelect))),React.createElement(\"div\",{className:\"input-field col s10\"},React.createElement(\"input\",{id:\"texto_respuesta_3\",type:\"text\",className:\"validate\"}),React.createElement(\"label\",{htmlFor:\"texto_respuesta\"},\"Texto de la respuesta\")),React.createElement(\"div\",{className:\"input-field col s1\"},React.createElement(\"select\",{id:\"score_resp_3\",className:\"browser-default\"},React.createElement(\"option\",{value:\"default\"},\"Puntaje\"),this.showOptions(this.state.scoresLastSelect)))))),React.createElement(\"div\",{className:\"card-action\"},React.createElement(Link,{className:\"btn btn-primary btn_opts\",onClick:this.crear,to:\"/preguntas\"},\"Guardar\"),React.createElement(Link,{className:\"btn btn-primary btn_opts\",to:\"/\"},\"Cancelar\")))));}}]);return CrearPregunta;}(Component);var mapToStateProps=function mapToStateProps(reducers){return reducers.preguntasReducers;};export default connect(mapToStateProps,preguntasActions)(CrearPregunta);","map":{"version":3,"sources":["C:/wamp64/www/whitelabel_fe/src/components/dashboard/preguntas/crear/CrearPregunta.js"],"names":["React","Component","CKEditor","Link","connect","preguntasActions","CrearPregunta","props","crear","data","state","document","getElementById","value","console","log","crearPregunta","preguntas","positionChange","e","positions","postionsEnables","pos","indexOf","target","splice","id","setState","positionsLastSelect","scoreChange","scores","scoresEnables","scoresLastSelect","showOptions","options","map","op","index","showModulos","modulos","p","texto","showScores","item","handleChange","bind","onEditorChange","evt","editor","getData","changeEvent","slice","mapToStateProps","reducers","preguntasReducers"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport CKEditor from 'ckeditor4-react';\r\nimport './Crear.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport * as preguntasActions from '../../../../actions/preguntasActions';\r\n\r\nclass CrearPregunta extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: '<p>Escriba el <em>texto</em> de la <strong>pregunta</strong></p>',\r\n            positions: [],\r\n            positionsLastSelect: [],\r\n            scores: [],\r\n            scoresLastSelect: [],\r\n\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.onEditorChange = this.onEditorChange.bind(this);\r\n    }\r\n\r\n    onEditorChange(evt) {\r\n        this.setState({\r\n            data: evt.editor.getData()\r\n        });\r\n    }\r\n\r\n    handleChange(changeEvent) {\r\n        this.setState({\r\n            data: changeEvent.target.value\r\n        });\r\n    }\r\n\r\n    crear = () => {\r\n        //let idPregunta = this.props.preguntas; \r\n\r\n        let data = {\r\n            \"texto\": this.state.data,\r\n            \"modulo_id\": document.getElementById('modulos').value,\r\n            \"respuestas\": [\r\n                {\r\n                    'texto': document.getElementById('texto_respuesta_1').value,\r\n                    \"posicion\": document.getElementById('pos_resp_1').value,\r\n                    \"puntaje\": document.getElementById('score_resp_1').value\r\n                },\r\n                {\r\n                    'texto': document.getElementById('texto_respuesta_2').value,\r\n                    \"posicion\": document.getElementById('pos_resp_2').value,\r\n                    \"puntaje\": document.getElementById('score_resp_2').value\r\n                },\r\n                {\r\n                    'texto': document.getElementById('texto_respuesta_3').value,\r\n                    \"posicion\": document.getElementById('pos_resp_3').value,\r\n                    \"puntaje\": document.getElementById('score_resp_3').value\r\n                }\r\n            ]\r\n        }\r\n        console.log(data);\r\n        this.props.crearPregunta(data, this.props.preguntas);\r\n\r\n    }\r\n\r\n    positionChange = (e, positions) => {\r\n        let postionsEnables = positions;\r\n        let pos = postionsEnables.indexOf(e.target.value);\r\n        postionsEnables.splice(pos, 1);\r\n        if (e.target.id == 'pos_resp_1') {\r\n            this.setState({\r\n                positions: postionsEnables\r\n            });\r\n        } else {\r\n            this.setState({\r\n                positionsLastSelect: postionsEnables\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    scoreChange = (e, scores) => {\r\n        let scoresEnables = scores;\r\n        console.log(e.target.value);\r\n        let pos = scoresEnables.indexOf(e.target.value);\r\n        scoresEnables.splice(pos, 1);\r\n        if (e.target.id == 'score_resp_1') {\r\n            this.setState({\r\n                scores: scoresEnables\r\n            });\r\n        } else {\r\n            this.setState({\r\n                scoresLastSelect: scoresEnables\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    showOptions = (options) => (\r\n        options.map((op, index) => (\r\n            <option key={index} value={op}>{op}</option>\r\n        ))\r\n    )\r\n\r\n    showModulos = () => this.props.modulos.map((p, index) => (\r\n        <option key={index} value={p.id}>{p.texto}</option>\r\n    ))\r\n\r\n    showScores = (e, item) => {\r\n\r\n        console.log(e.target.value);\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col l12\">\r\n                    <div className=\"card-panel\">\r\n                        <div className=\"card-content\">\r\n                            <span className=\"card-title\"><h4>Pregunta</h4></span>\r\n                            <div className=\"row\">\r\n                                <form className=\"col s12\">\r\n                                    <CKEditor\r\n                                        data={this.state.data}\r\n                                        onChange={this.onEditorChange} />\r\n                                </form>\r\n                            </div>\r\n                            <div className=\"row\">                                \r\n                                <div className=\"input-field col s6\">\r\n                                    <p>Módulo :</p>\r\n                                    <select id=\"modulos\" className=\"browser-default\">\r\n                                        {this.showModulos()}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-panel\">\r\n                        <div className=\"card-content\">\r\n                            <span className=\"card-title\"><h4>Respuestas</h4></span>\r\n                            <div className=\"row\">\r\n                                <form className=\"col s12\">\r\n                                    <div className=\"input-field col s1\">\r\n                                        <select id=\"pos_resp_1\" className=\"browser-default\" onChange={(e) => { this.positionChange(e, ['a', 'b', 'c']) }}>\r\n                                            <option value=\"\">Posición</option>\r\n                                            <option value=\"a\">a</option>\r\n                                            <option value=\"b\">b</option>\r\n                                            <option value=\"c\">c</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"input-field col s10\">\r\n                                        <input id=\"texto_respuesta_1\" type=\"text\" className=\"validate\" />\r\n                                        <label htmlFor=\"texto_respuesta\">Texto de la respuesta</label>\r\n                                    </div>\r\n                                    <div className=\"input-field col s1\">\r\n                                        <select id=\"score_resp_1\" className=\"browser-default\" onChange={(e) => { this.scoreChange(e, ['0', '1', '2']) }}>\r\n                                            <option value=\"\" >Puntaje</option>\r\n                                            <option value=\"0\">0</option>\r\n                                            <option value=\"1\">1</option>\r\n                                            <option value=\"2\">2</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"card-content\">\r\n                            <div className=\"row\">\r\n                                <form className=\"col s12\">\r\n                                    <div className=\"input-field col s1\">\r\n                                        <select id='pos_resp_2' className=\"browser-default\" onChange={(e) => { this.positionChange(e, this.state.positions.slice()) }}>\r\n                                            <option value=\"default\">Posición</option>\r\n                                            {this.showOptions(this.state.positions)}\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"input-field col s10\">\r\n                                        <input id=\"texto_respuesta_2\" type=\"text\" className=\"validate\" />\r\n                                        <label htmlFor=\"texto_respuesta\">Texto de la respuesta</label>\r\n                                    </div>\r\n                                    <div className=\"input-field col s1\">\r\n                                        <select id=\"score_resp_2\" className=\"browser-default\" onChange={(e) => { this.scoreChange(e, this.state.scores.slice()) }}>\r\n                                            <option value=\"\">Puntaje</option>\r\n                                            {this.showOptions(this.state.scores)}\r\n                                        </select>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"card-content\">\r\n                            <div className=\"row\">\r\n                                <form className=\"col s12\">\r\n                                    <div className=\"input-field col s1\">\r\n                                        <select id='pos_resp_3' className=\"browser-default\">\r\n                                            <option value=\"\">Posición</option>\r\n                                            {this.showOptions(this.state.positionsLastSelect)}\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"input-field col s10\">\r\n                                        <input id=\"texto_respuesta_3\" type=\"text\" className=\"validate\" />\r\n                                        <label htmlFor=\"texto_respuesta\">Texto de la respuesta</label>\r\n                                    </div>\r\n                                    <div className=\"input-field col s1\">\r\n                                        <select id=\"score_resp_3\" className=\"browser-default\">\r\n                                            <option value=\"default\">Puntaje</option>\r\n                                            {this.showOptions(this.state.scoresLastSelect)}\r\n                                        </select>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"card-action\">\r\n                            <Link className=\"btn btn-primary btn_opts\" onClick={this.crear} to='/preguntas'>Guardar</Link>\r\n                            <Link className=\"btn btn-primary btn_opts\" to='/'>Cancelar</Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapToStateProps = (reducers) => {\r\n    return reducers.preguntasReducers;\r\n}\r\nexport default connect(mapToStateProps, preguntasActions)(CrearPregunta);"]},"metadata":{},"sourceType":"module"}